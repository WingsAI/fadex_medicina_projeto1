# 🤖 Instruções para o Claude - Projeto SNPQIM (WingsAI)

## 🌍 Idioma e Comunicação

**IMPORTANTE**: Todas as respostas devem ser em **Português do Brasil (pt-BR)**.

- Use termos técnicos em português quando possível
- Mantenha termos técnicos em inglês apenas quando consagrados (ex: API, Docker, Machine Learning)
- Use formatação clara com emojis para melhor visualização
- Seja objetivo e direto nas respostas

## 📋 Contexto do Projeto

Este é o **SNPQIM** (Sistema Nacional para Padronização da Qualidade de Imagens Médicas), alimentado pela tecnologia **WingsAI**.

### Informações Importantes:
- **Nome do sistema**: SNPQIM
- **Tecnologia core**: WingsAI (antigo FADEX - já migrado)
- **Objetivo**: Análise automatizada de qualidade de imagens médicas oftalmológicas
- **Score**: Sistema de pontuação 0-100 para qualidade de imagens
- **Domínio**: Saúde / Oftalmologia / Machine Learning

## 🏗️ Arquitetura do Sistema

### Backend
- **Framework**: FastAPI (Python 3.10+)
- **Core Engine**: [src/ml/scoring/wingsai_core.py](src/ml/scoring/wingsai_core.py)
- **API**: [src/backend/main.py](src/backend/main.py)
- **Porta**: 8000

### Frontend
- **WebApp Moderno**: Next.js 14 + TypeScript + Tailwind CSS (pasta `webapp/`)
- **Interface Simples**: HTML puro ([src/frontend/index.html](src/frontend/index.html))
- **Porta WebApp**: 3000

### Testes
- **Scripts**: [scripts/test_wingsai.py](scripts/test_wingsai.py)
- **Testes Unitários**: [tests/test_wingsai_core.py](tests/test_wingsai_core.py)

## 📁 Estrutura de Pastas

```
fadex_medicina_projeto1/
├── docs/              # Toda documentação centralizada aqui
├── src/
│   ├── backend/       # API FastAPI
│   ├── frontend/      # Interface HTML simples
│   └── ml/scoring/    # Algoritmo WingsAI core
├── webapp/            # Aplicação Next.js moderna
├── scripts/           # Scripts utilitários e testes
└── tests/             # Testes automatizados
```

## 🎯 Convenções de Código

### Python
- **Style Guide**: PEP 8
- **Imports**: Sempre usar caminhos relativos a partir de `src/`
- **Classes**: PascalCase (ex: `WingsAIQualityAnalyzer`)
- **Funções**: snake_case (ex: `analyze_image_quality`)
- **Constantes**: UPPER_CASE (ex: `MAX_IMAGE_SIZE`)

### Nomes Importantes
- ✅ **Usar**: `WingsAI`, `wingsai_core`, `WingsAIScore`
- ❌ **NÃO usar**: `FADEX`, `fadex_core` (nome antigo, já migrado)

### JavaScript/TypeScript (WebApp)
- **Style Guide**: ESLint + Prettier
- **Componentes**: PascalCase (ex: `DNAVisualization`)
- **Funções**: camelCase (ex: `analyzeImage`)
- **Arquivos**: kebab-case ou PascalCase conforme convenção Next.js

## 🔧 Comandos Importantes

### Desenvolvimento
```bash
# Backend
python src/backend/main.py

# WebApp
cd webapp && npm run dev

# Testes
python scripts/test_wingsai.py examples/
pytest tests/
```

### Docker
```bash
docker-compose up          # Subir todos serviços
docker-compose up backend  # Apenas backend
docker-compose down        # Parar serviços
```

### Git
```bash
# Sempre descrever mudanças em português
git commit -m "Adiciona funcionalidade X"
git commit -m "Corrige bug Y"
git commit -m "Atualiza documentação Z"
```

## 📝 Diretrizes para Modificações

### Ao Adicionar Funcionalidades:
1. Atualizar documentação relevante em `docs/`
2. Adicionar testes para novas funcionalidades
3. Manter consistência com arquitetura existente
4. Seguir padrões de nomenclatura do projeto

### Ao Corrigir Bugs:
1. Identificar causa raiz
2. Criar teste que reproduz o bug (se aplicável)
3. Implementar correção
4. Verificar que teste passa
5. Documentar mudança

### Ao Refatorar:
1. Manter compatibilidade com código existente
2. Atualizar todos imports afetados
3. Atualizar documentação
4. Rodar todos testes para garantir que nada quebrou

## 🚨 Pontos de Atenção

### Imports
- Backend sempre deve importar: `from ml.scoring.wingsai_core import ...`
- Nunca usar `fadex_core` (nome antigo)
- Adicionar `src/` ao `sys.path` quando necessário

### Paths
- Sempre usar paths absolutos ou relativos à raiz do projeto
- Não assumir diretório de trabalho específico

### Documentação
- Toda documentação principal vai em `docs/`
- README.md na raiz deve ser conciso e linkar para docs/
- Manter `docs/COMO_USAR.md` atualizado com qualquer mudança de uso

### Dados Médicos
- NUNCA commitar imagens médicas reais
- Usar apenas imagens sintéticas para testes
- Respeitar LGPD e privacidade de dados de saúde

## 🎨 Estilo de Documentação

### Títulos
- Usar emojis relevantes: 🚀 🔧 📊 🏥 🧪 etc.
- Ser descritivo mas conciso

### Exemplos de Código
- Sempre incluir comentários explicativos em português
- Mostrar input e output esperado quando relevante
- Usar blocos de código com syntax highlighting

### Mensagens de Log
```python
# ✅ BOM - Mensagens claras e informativas
logger.info("✅ Módulo wingsai_core importado com sucesso")
logger.error("❌ Erro ao processar imagem: arquivo inválido")

# ❌ RUIM - Mensagens vagas
logger.info("OK")
logger.error("Error")
```

## 🔍 Debugging

### Problemas Comuns

**Erro de Import:**
```
ModuleNotFoundError: No module named 'ml'
```
**Solução**: Executar de raiz do projeto, não de subpastas

**Erro de Porta em Uso:**
```
Address already in use: 8000
```
**Solução**: Verificar se backend já está rodando ou usar porta alternativa

**NumPy Incompatível:**
```
Solução: pip install "numpy<2"
```

## 📚 Recursos de Referência

- [PRD Completo](docs/PRD_SNPQIM.md) - Especificações do produto
- [Como Usar](docs/COMO_USAR.md) - Guia completo de uso
- [Setup Rápido](docs/SETUP_RAPIDO.md) - Instalação rápida
- [Troubleshooting](docs/TROUBLESHOOTING.md) - Resolução de problemas
- [Versões](docs/VERSOES.md) - Diferentes versões do sistema

## 🤝 Interação com Usuário

### Tom de Comunicação
- Profissional mas acessível
- Explicar conceitos técnicos de forma clara
- Usar analogias quando ajudar na compreensão
- Ser paciente com dúvidas repetidas

### Formato de Respostas
1. **Resumo rápido** da solução (2-3 linhas)
2. **Explicação detalhada** se necessário
3. **Código/Comandos** quando aplicável
4. **Links** para documentação relevante
5. **Próximos passos** se houver

### Quando Não Souber
- Ser honesto sobre limitações
- Sugerir onde procurar a informação
- Oferecer alternativas quando possível

## 🎓 Conhecimento do Domínio

### Termos Médicos
- **Fundoscopia**: Exame do fundo do olho (retina)
- **OCT**: Tomografia de Coerência Óptica
- **Angiografia**: Exame de vasos sanguíneos
- **DICOM**: Padrão para imagens médicas digitais

### Métricas de Qualidade
- **Nitidez (Sharpness)**: Definição de bordas
- **Exposição (Exposure)**: Brilho adequado
- **Contraste**: Diferenciação entre regiões
- **Ruído (Noise)**: Granularidade indesejada
- **Artefatos (Artifacts)**: Distorções na imagem

### Categorias de Score
- **90-100**: Excelente - Adequada para ML avançado
- **70-89**: Boa - Adequada para diagnóstico clínico
- **50-69**: Regular - Adequada apenas para triagem
- **0-49**: Inadequada - Necessita reexame

## 🚀 Prioridades ao Ajudar

1. **Funcionalidade** - Sistema deve funcionar corretamente
2. **Clareza** - Código e documentação devem ser compreensíveis
3. **Manutenibilidade** - Código fácil de manter e modificar
4. **Performance** - Otimizar quando relevante, não prematuramente
5. **Experiência do Usuário** - Interface intuitiva e mensagens claras

---

**Última Atualização**: Outubro 2025
**Versão**: 1.0
**Status**: Ativo

💡 **Dica**: Este arquivo deve ser atualizado conforme o projeto evolui!
